# Pre-Deployment Checklist for XFlex Trading Academy

## ‚úÖ Code Readiness

- [x] All TypeScript compilation errors resolved
- [x] All database migrations applied successfully
- [x] All tRPC procedures tested and working
- [x] File upload functionality implemented and tested
- [x] Logging system configured and tested
- [x] All environment variables documented

## ‚úÖ Database Schema

- [x] Users table created
- [x] Admins table created
- [x] Courses table created
- [x] Episodes table created
- [x] Enrollments table created
- [x] Episode Progress table created
- [x] LexAI Subscriptions table created
- [x] LexAI Messages table created

## ‚úÖ Features Implemented

### Course Management
- [x] Admin can create/edit/delete courses
- [x] Admin can upload course thumbnails
- [x] Bilingual support (English/Arabic)
- [x] Course publishing workflow

### Episode Management
- [x] Admin can create/edit/delete episodes
- [x] Admin can upload video files
- [x] Episode ordering system
- [x] Free/premium episode marking

### User Management
- [x] User registration and authentication
- [x] User dashboard with enrolled courses
- [x] Course progress tracking
- [x] Episode completion tracking

### LexAI Feature
- [x] Subscription management system
- [x] Chat interface with message history
- [x] Image upload for chart analysis
- [x] Usage tracking and limits
- [x] API integration point ready

### Admin Panel
- [x] Admin authentication system
- [x] Dashboard with statistics
- [x] Course management interface
- [x] Episode management interface
- [x] User and enrollment management

## üìã Pre-Deployment Steps

### 1. GitHub Repository Setup

```bash
# Initialize git if not already done
cd /path/to/xflex-flask
git init

# Add all files
git add .

# Commit
git commit -m "Initial commit: XFlex Trading Academy with LexAI"

# Add remote (replace with your repo URL)
git remote add origin https://github.com/IslamThwabeh/xflexwithai.git

# Push to GitHub
git push -u origin main
```

### 2. Railway Project Setup

1. **Create Railway Account**
   - Go to https://railway.app
   - Sign up or log in

2. **Create New Project**
   - Click "New Project"
   - Select "Deploy from GitHub repo"
   - Connect your GitHub account
   - Select `IslamThwabeh/xflexwithai` repository

3. **Add MySQL Database**
   - In your Railway project, click "New"
   - Select "Database" ‚Üí "MySQL"
   - Wait for database to provision
   - Copy the `DATABASE_URL` from the database service

### 3. Configure Environment Variables

In Railway project settings, add these environment variables:

**Required (Auto-generated by Manus Platform):**
- `DATABASE_URL` - From Railway MySQL service
- `BUILT_IN_FORGE_API_KEY` - From Manus platform
- `BUILT_IN_FORGE_API_URL` - From Manus platform
- `JWT_SECRET` - Generate with: `openssl rand -base64 32`
- `OAUTH_SERVER_URL` - From Manus platform
- `VITE_APP_ID` - From Manus platform
- `VITE_OAUTH_PORTAL_URL` - From Manus platform
- `OWNER_OPEN_ID` - Your Manus user ID
- `OWNER_NAME` - Your name

**Optional (for features):**
- `DEBUG_LOGGING=true` - Enable detailed logging for testing
- `VITE_APP_TITLE=XFlex Trading Academy`
- `VITE_APP_LOGO=/logo.svg`

### 4. Deploy

1. Railway will automatically deploy when you push to GitHub
2. Wait for build to complete (5-10 minutes)
3. Click on the deployment URL to access your app

### 5. Post-Deployment Setup

1. **Add Your Admin Account**
   - Go to Railway project ‚Üí MySQL database
   - Click "Query" tab
   - Run this SQL (replace with your actual openId):
   ```sql
   INSERT INTO admins (openId, name, email, loginMethod, createdAt, updatedAt, lastSignedIn)
   VALUES ('YOUR_OPEN_ID', 'Your Name', 'your@email.com', 'apple', NOW(), NOW(), NOW());
   ```

2. **Verify Database Tables**
   ```sql
   SHOW TABLES;
   ```
   Should show: admins, courses, enrollments, episodes, episodeProgress, lexaiMessages, lexaiSubscriptions, users

3. **Test Admin Login**
   - Visit `https://your-app.railway.app/admin/login`
   - Sign in with your Manus account
   - Verify you can access admin panel

4. **Create Test Course**
   - Go to Admin Panel ‚Üí Courses
   - Create a new course with bilingual content
   - Upload a thumbnail
   - Add episodes with videos
   - Publish the course

5. **Test User Flow**
   - Log out from admin
   - Visit homepage
   - Sign up as a regular user
   - Verify course enrollment works
   - Test video playback and progress tracking

6. **Test LexAI**
   - Manually create a test subscription:
   ```sql
   INSERT INTO lexaiSubscriptions 
   (userId, isActive, startDate, endDate, paymentStatus, paymentAmount, messagesUsed, messagesLimit, createdAt, updatedAt)
   VALUES 
   (1, 1, NOW(), DATE_ADD(NOW(), INTERVAL 1 MONTH), 'completed', 2999, 0, 100, NOW(), NOW());
   ```
   - Visit `/lexai`
   - Test chat interface
   - Upload a chart image
   - Verify message history

## üîç Verification Checklist

After deployment, verify:

- [ ] Homepage loads correctly
- [ ] User registration works
- [ ] Admin login works
- [ ] Admin can create courses
- [ ] Admin can upload thumbnails
- [ ] Admin can create episodes
- [ ] Admin can upload videos
- [ ] Users can enroll in courses
- [ ] Users can watch videos
- [ ] Progress tracking works
- [ ] LexAI subscription page shows
- [ ] LexAI chat works (with test subscription)
- [ ] File uploads work (thumbnails, videos, charts)
- [ ] Logging is visible in Railway logs

## üêõ Troubleshooting

### Build Fails
- Check Railway logs for errors
- Verify all dependencies in package.json
- Ensure DATABASE_URL is set correctly

### Database Connection Error
- Verify DATABASE_URL format: `mysql://user:password@host:port/database`
- Check if MySQL service is running in Railway
- Enable SSL if required by Railway MySQL

### File Upload Fails
- Verify S3 credentials are set
- Check file size limits
- Review Railway logs for upload errors

### Admin Can't Login
- Verify admin record exists in database
- Check openId matches your Manus account
- Review authentication logs

## üìä Monitoring

After deployment:

1. **Enable Debug Logging**
   - Set `DEBUG_LOGGING=true` in Railway
   - Monitor logs for any issues

2. **Check Railway Metrics**
   - CPU usage
   - Memory usage
   - Response times

3. **Test All Features**
   - Go through the verification checklist
   - Test with real data
   - Verify all user flows work

## üéØ Next Steps After Deployment

1. **Add Stripe Integration**
   - For real course purchases
   - For LexAI subscriptions

2. **Configure LexAI API**
   - Update `server/routers.ts` line 448
   - Add your currency analysis API endpoint

3. **Customize Branding**
   - Update logo and colors
   - Add your domain name
   - Configure email notifications

4. **Monitor and Optimize**
   - Review user analytics
   - Optimize database queries
   - Scale Railway resources as needed
